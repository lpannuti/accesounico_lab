<ul class="wizard-tab" id="wizardTabList">

  <li class="wizard-tab-item">
    <p class="wizard-link active u-text-h2 u-color-grey-40" id="tab1-tab" data-toggle="tab" href="#tab1" role="tab" aria-controls="tab1" aria-selected="true">
      Profili
    </p>
  </li>
  <li class="wizard-tab-item">
    <p class="wizard-link u-text-h2 u-color-grey-40" id="tab2-tab" data-toggle="tab" href="#tab2" role="tab" aria-controls="tab2" aria-selected="true">
      Argomenti
    </p>
  </li>

</ul>

<div class="tab-content" id="myTabContent">

  <div class="tab-pane p-3 fade show active" id="tab1" role="tabpanel" aria-labelledby="tab1-tab">
    <!-- {{profile.name}} section-->
    <section class="u-layout-wide u-layout-withGutter u-layoutCenter u-padding-r-top">
      <div class="Grid Grid--withGutter">
        <div class="Grid-cell u-size1of4">
          <img src="{{ site.baseurl }}/assets/images/citizen.jpg" class="u-imgResponsive" alt="profili" />
        </div>
        <div class="Grid-cell u-size3of4 u-padding-r-all">
          <ul id="wizard-profile-list" class="Prose u-text-r-xs"></ul>
        </div>
        <div class="Grid-cell u-padding-r-all">
          <p class="Prose u-padding-r-top u-padding-r-bottom">
            Breve testo che spiega i Benefit relativi alle sue domande, con link alle sezioni interessate. In questo caso la parte di schede dettagliate, potremmo inserire qui il cerca o i tre link “demo”, link alla parte di feedback.
          </p>
        </div>
      </div>
    </section>
  </div>

  <div class="tab-pane p-3 fade" id="tab2" role="tabpanel" aria-labelledby="tab2-tab">
    <section class="u-layout-wide u-layout-withGutter u-layoutCenter u-padding-r-top">
      <div class="Grid Grid--withGutter">
        <div class="Grid-cell u-size1of4">
          <img src="{{ site.baseurl }}/assets/images/pa.jpg" class="u-imgResponsive" alt="temi" />
        </div>
        <div class="Grid-cell u-size3of4 u-padding-r-all">
          <ul id="wizard-theme-list" class="Prose u-text-r-xs"></ul>
        </div>
        <div class="Grid-cell u-padding-r-all">
          <p class="Prose u-padding-r-top u-padding-r-bottom">
            Breve testo che spiega i Benefit relativi alle sue domande, con link alle sezioni interessate. In questo caso la parte di schede dettagliate, potremmo inserire qui il cerca o i tre link “demo”, link alla parte di feedback.
          </p>
        </div>
      </div>
    </section>
  </div>

</div>

<script>
  /* get all profiles from data file */
  /*window.allprofiles = {
    {% for profile in site.data.profiles %}
      "{{ profile.metaname }}": {
        "name": "{{ profile.name | xml_escape }}",
        "image": "{{ profile.image | xml_escape }}"
      }
      {% unless forloop.last %},{% endunless %}
    {% endfor %}
  };*/
  /* get all themes from data file */
  /*window.allthemes = {
    {% for theme in site.data.themes %}
      "{{ theme.metaname }}": {
        "name": "{{ theme.name | xml_escape }}",
        "image": "{{ theme.image | xml_escape }}"
      }
      {% unless forloop.last %},{% endunless %}
    {% endfor %}
  };*/

  /* get all profiles from schede */
  window.allprofiles = {
    {% assign profiles = site.schede | group_by: 'utenza' | sort: 'name' %}
    {% for profile in profiles %}
      {% assign profile_items = site.data.profiles | where_exp: "item", "item.metaname == profile.name" %}
      {% assign user = profile_items[0] %}
        "{{ user.metaname }}": {
          "name": "{{ user.name | xml_escape }}",
          "image": "{{ user.image | xml_escape }}"
        }
      {% unless forloop.last %},{% endunless %}
    {% endfor %}
  };
  /* get all themes from schede */
  window.allthemes = {
    {% assign themes = site.schede | group_by: 'tema' | sort: 'name' %}
    {% for tema in themes %}
      {% assign tema_items = site.data.themes | where_exp: "item", "item.metaname == tema.name" %}
      {% assign theme = tema_items[0] %}
        "{{ theme.metaname }}": {
          "name": "{{ theme.name | xml_escape }}",
          "image": "{{ theme.image | xml_escape }}"
        }
      {% unless forloop.last %},{% endunless %}
    {% endfor %}
  };

  window.themes = window.allthemes;
  window.profiles = window.allprofiles;
  window.profile = '';
  window.theme = '';
  window.baseurl = '{{ site.baseurl }}';

  window.schede = {
    {% assign profiles = site.schede | group_by: 'utenza' | sort: 'name' %}
    {% for profile in profiles %}
      "{{ profile.name }}": {
      {% assign schede_per_tema = profile.items | group_by: 'tema' | sort: 'name' %}
      {% for tema in schede_per_tema %}
        {% assign tema_items = site.data.themes | where_exp: "item", "item.metaname == tema.name" %}
        {% assign theme = tema_items[0] %}
          "{{ theme.metaname }}": {
            "name": "{{ theme.name | xml_escape }}",
            "image": "{{ theme.image | xml_escape }}"
          }
        {% unless forloop.last %},{% endunless %}
      {% endfor %}
      }
      {% unless forloop.last %},{% endunless %}
    {% endfor %}
    ,

    {% assign themes = site.schede | group_by: 'tema' | sort: 'name' %}
    {% for theme in themes %}
      "{{ theme.name }}": {
      {% assign schede_per_profile = theme.items | group_by: 'utenza' | sort: 'name' %}
      {% for profile in schede_per_profile %}
        {% assign profile_items = site.data.profiles | where_exp: "item", "item.metaname == profile.name" %}
        {% assign profilo = profile_items[0] %}
          "{{ profilo.metaname }}": {
            "name": "{{ profilo.name | xml_escape }}",
            "image": "{{ profilo.image | xml_escape }}"
          }
        {% unless forloop.last %},{% endunless %}
      {% endfor %}
      }
      {% unless forloop.last %},{% endunless %}
    {% endfor %}
  }

</script>
